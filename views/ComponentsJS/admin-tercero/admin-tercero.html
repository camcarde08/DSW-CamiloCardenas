<style>
    .sgm-titulo {
        color: #000087;
    }
    .fila-form{
        margin-top: 10px;
    }
    .tabla-contactos{
        font-size: 12px;
    }
</style>

<div>
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <h1 class="sgm-titulo">Clientes</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
            <div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <table class="table" style="margin-bottom: 0px;">
                            <thead>
                                <tr>
                                    <th style="text-align: center; border-bottom: 0;" class="col-xs-1 col-sm-1 col-md-1 col-lg-1">Clientes</th>
                                </tr>
                                <tr>
                                    <th style="text-align: center; border-bottom: 0;" class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                        <input class="form-control input-sm" type="text" ng-model="vm.filter.nombre">
                                    </th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <div class="panel-body" style="height: 300px; overflow-y: scroll; padding-right: 0;">
                        <table class="table">
                            <tbody>
                                <tr style="cursor: default" ng-class="{info: cliente.selected}" dir-paginate="cliente in vm.clientes | filter : {nombre: vm.filter.nombre} | itemsPerPage: 10 "
                                    pagination-id="gridProductos" >
                                    <td style="vertical-align:middle; text-align: center;"  class="col-xs-5 col-sm-5 col-md-5 col-lg-5" ng-click="vm.rowSelectedCliente(cliente)">{{cliente.nombre}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="panel-footer">
                        <dir-pagination-controls pagination-id="gridProductos"></dir-pagination-controls>
                        <button type="button" class="btn btn-primary" ng-click="vm.openModalNewCliente()">
                            <i class="fa fa-plus" aria-hidden="true"></i> Agregar nuevo Cliente
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8" ng-if="vm.clienteSelected">
            <div>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <form name="formCliente">
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Nombre*:
                                </label>
                                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                                    <input type="text" ng-model="vm.clienteSelected.nombre" class="form-control" required>
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Tipo de identificación:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <select type="text" ng-model="vm.clienteSelected.tipo_identificacion" class="form-control">
                                        <option ng-repeat="identificacion in vm.identificaciones" value="{{identificacion.id}}">{{identificacion.tipo_identificacion}}</option>
                                    </select>
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Número de identificación:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.numero_identificacion" class="form-control">
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Representante:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.nombre_representante" class="form-control">
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Dirección:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.direccion" class="form-control">
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Teléfono 1:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.telefono1" class="form-control">
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Teléfono 2:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.telefono2" class="form-control">
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Fax:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.fax" class="form-control">
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Email:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" ng-model="vm.clienteSelected.email" class="form-control">
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Ciudad*:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <select type="text" ng-model="vm.clienteSelected.id_ciudad" class="form-control" required>
                                        <option ng-repeat="ciudad in vm.ciudades" value="{{ciudad.id}}">{{ciudad.nombre}}</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Descuento:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="checkbox" ng-true-value="'1'"
                                           ng-false-value="'0'" ng-model="vm.clienteSelected.descuento_pronto_pago">
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    % Descuento*:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="number" ng-model="vm.clienteSelected.porcent_descuento" class="form-control" string-to-number required>
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Contrato:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="checkbox" ng-true-value="'1'"
                                           ng-false-value="'0'" ng-model="vm.clienteSelected.tiene_contrato">
                                </div>
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Fecha de contrato:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" size="10" class="form-control" ng-model="vm.clienteSelected.fecha_contrato" data-autoclose="1" placeholder="Fecha contrato"
                                           data-date-format="dd-MM-yyyy" bs-datepicker>
                                </div>
                            </div>
                            <div class="row fila-form">
                                <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                                    Fecha vence contrato:
                                </label>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <input type="text" size="10" class="form-control" ng-model="vm.clienteSelected.fecha_vencimiento_contrato" data-autoclose="1" placeholder="Fecha vencimiento contrato"
                                           data-date-format="dd-MM-yyyy" bs-datepicker>
                                </div>
                            </div>

                            <div class="row fila-form">
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <button type="button" class="btn btn-primary" ng-click="vm.openModalContactos()">
                                        <i class="fa fa-users" aria-hidden="true"></i> Gestionar contactos
                                    </button>
                                </div>
                                <div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 col-md-offset-5">
                                    <button type="button" class="btn btn-success" ng-disabled="!formCliente.$valid" ng-click="vm.actualizarCliente()">
                                        Actualizar Cliente
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div id="notification">
    <span id="messageNotification"></span>
</div>

<div class="modal fade" id="waitModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">{{vm.waitModalText}}</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"
                                 style="width: 100%">
                                <span class="sr-only">100% Complete</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="newTerceroModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-keyboard="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">Crear nuevo Cliente</h4>
            </div>
            <div class="modal-body">
                <form name="newTerceroForm">
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Nombre*:
                        </label>
                        <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                            <input type="text" ng-model="vm.newCliente.nombre" class="form-control" required>
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Tipo de identificación:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <select type="text" ng-model="vm.newCliente.tipo_identificacion" class="form-control">
                                <option ng-repeat="identificacion in vm.identificaciones" value="{{identificacion.id}}">{{identificacion.tipo_identificacion}}</option>
                            </select>
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Número de identificación:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.numero_identificacion" class="form-control">
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Representante:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.nombre_representante" class="form-control">
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Dirección:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.direccion" class="form-control">
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Teléfono 1:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.telefono1" class="form-control">
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Teléfono 2:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.telefono2" class="form-control">
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Fax:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.fax" class="form-control">
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Email:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" ng-model="vm.newCliente.email" class="form-control">
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Ciudad*:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <select type="text" ng-model="vm.newCliente.id_ciudad" class="form-control" required>
                                <option ng-repeat="ciudad in vm.ciudades" value="{{ciudad.id}}">{{ciudad.nombre}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Descuento:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="checkbox" ng-true-value="'1'"
                                   ng-false-value="'0'" ng-model="vm.newCliente.descuento_pronto_pago">
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            % Descuento*:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="number" ng-model="vm.newCliente.porcent_descuento" class="form-control" string-to-number required>
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Contrato:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="checkbox" ng-true-value="'1'"
                                   ng-false-value="'0'" ng-model="vm.newCliente.tiene_contrato">
                        </div>
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Fecha de contrato:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" size="10" class="form-control" ng-model="vm.newCliente.fecha_contrato" data-autoclose="1" placeholder="Fecha contrato"
                                   data-date-format="dd-MM-yyyy" bs-datepicker>
                        </div>
                    </div>
                    <div class="row fila-form">
                        <label class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                            Fecha vence contrato:
                        </label>
                        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                            <input type="text" size="10" class="form-control" ng-model="vm.newCliente.fecha_vencimiento_contrato" data-autoclose="1" placeholder="Fecha vencimiento contrato"
                                   data-date-format="dd-MM-yyyy" bs-datepicker>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" ng-click="vm.closeModalNewTercero()"><i class="fa fa-times" aria-hidden="true"></i> Cancelar</button>
                <button type="button" class="btn btn-primary" ng-click="vm.confirmNewTerceroModal()" ng-disabled="!newTerceroForm.$valid"> <i class="fa fa-check" aria-hidden="true"></i> Aceptar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="contactosModal" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Gestionar contactos</h4>
            </div>
            <div class="modal-body tabla-contactos">
                <table class="table table-responsive">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Cargo</th>
                            <th>Área</th>
                            <th>Teléfono</th>
                            <th>Celular</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="contacto in vm.clienteSelected.contactos" ng-class="contacto.class">
                            <td>
                                <input type="text" ng-model="contacto.nombre" class="form-control">
                            </td>
                            <td>
                                <input type="text" ng-model="contacto.cargo" class="form-control">
                            </td>
                            <td>
                                <input type="text" ng-model="contacto.area" class="form-control">
                            </td>
                            <td>
                                <input type="text" ng-model="contacto.telefono" class="form-control">
                            </td>
                            <td>
                                <input type="text" ng-model="contacto.movil" class="form-control">
                            </td>
                            <td>
                                <input type="text" ng-model="contacto.email" class="form-control">
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button type="button" class="btn btn-success" ng-click="vm.adicionarContacto()">
                    <i class="fa fa-plus" aria-hidden="true"></i> Agregar
                </button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" ng-click="vm.guardarContactos()">Guardar</button>
            </div>
        </div>
    </div>
</div>